import{g as G,r as k,c as f,s as ne,a as J,b as ae,h as C,d as le,u as ie,e as se,f as ue,i as re,j as oe,k as ce,l as W,m as de,n as fe,o as me,p as ve,Q as ge,q as pe,t as be,v as he,w as R,x as Q,y as I,z as H,A as S,B as K,C as X,D as ye,E as P,F as Y,G as Fe,H as _e,I as xe,J as Se,_ as Ce}from"./index-XZ6Lc5iv.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="22235923-cb4b-41f4-bb92-bd89e581599a",e._sentryDebugIdIdentifier="sentry-dbid-22235923-cb4b-41f4-bb92-bd89e581599a")}catch{}})();function D(e,r,h,y){const l=[];return e.forEach(o=>{y(o)===!0?l.push(o):r.push({failedPropValidation:h,file:o})}),l}function T(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),J(e)}const De={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ve=["rejected"];function ze({editable:e,dnd:r,getFileInput:h,addFilesToQueue:y}){const{props:l,emit:o,proxy:F}=G(),_=k(null),g=f(()=>l.accept!==void 0?l.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),s=f(()=>parseInt(l.maxFiles,10)),p=f(()=>parseInt(l.maxTotalSize,10));function N(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&ne(t);else{const v=h();v&&v!==t.target&&v.click(t)}}function w(t){e.value&&t&&y(null,t)}function q(t,v,V,z){let a=Array.from(v||t.target.files);const m=[],x=()=>{m.length!==0&&o("rejected",m)};if(l.accept!==void 0&&g.value.indexOf("*/")===-1&&(a=D(a,m,"accept",i=>g.value.some(c=>i.type.toUpperCase().startsWith(c)||i.name.toUpperCase().endsWith(c))),a.length===0))return x();if(l.maxFileSize!==void 0){const i=parseInt(l.maxFileSize,10);if(a=D(a,m,"max-file-size",c=>c.size<=i),a.length===0)return x()}if(l.multiple!==!0&&a.length!==0&&(a=[a[0]]),a.forEach(i=>{i.__key=i.webkitRelativePath+i.lastModified+i.name+i.size}),z===!0){const i=V.map(c=>c.__key);a=D(a,m,"duplicate",c=>i.includes(c.__key)===!1)}if(a.length===0)return x();if(l.maxTotalSize!==void 0){let i=z===!0?V.reduce((c,U)=>c+U.size,0):0;if(a=D(a,m,"max-total-size",c=>(i+=c.size,i<=p.value)),a.length===0)return x()}if(typeof l.filter=="function"){const i=l.filter(a);a=D(a,m,"filter",c=>i.includes(c))}if(l.maxFiles!==void 0){let i=z===!0?V.length:0;if(a=D(a,m,"max-files",()=>(i++,i<=s.value)),a.length===0)return x()}if(x(),a.length!==0)return a}function E(t){T(t),r.value!==!0&&(r.value=!0)}function u(t){J(t),(t.relatedTarget!==null||ae.is.safari!==!0?t.relatedTarget!==_.value:document.elementsFromPoint(t.clientX,t.clientY).includes(_.value)===!1)===!0&&(r.value=!1)}function j(t){T(t);const v=t.dataTransfer.files;v.length!==0&&y(null,v),r.value=!1}function O(t){if(r.value===!0)return C("div",{ref:_,class:`q-${t}__dnd absolute-full`,onDragenter:T,onDragover:T,onDragleave:u,onDrop:j})}return Object.assign(F,{pickFiles:N,addFiles:w}),{pickFiles:N,addFiles:w,onDragover:E,onDragleave:u,processFiles:q,getDndNode:O,maxFilesNumber:s,maxTotalSizeNumber:p}}const Ie=le({name:"QFile",inheritAttrs:!1,props:{...ie,...se,...De,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ue,...Ve],setup(e,{slots:r,emit:h,attrs:y}){const{proxy:l}=G(),o=re(),F=k(null),_=k(!1),g=oe(e),{pickFiles:s,onDragover:p,onDragleave:N,processFiles:w,getDndNode:q}=ze({editable:o.editable,dnd:_,getFileInput:L,addFilesToQueue:M}),E=ce(e),u=f(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),j=f(()=>W(u.value)),O=f(()=>u.value.map(n=>n.name).join(", ")),t=f(()=>de(u.value.reduce((n,d)=>n+d.size,0))),v=f(()=>({totalSize:t.value,filesNumber:u.value.length,maxFiles:e.maxFiles})),V=f(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:g.value,...y,id:o.targetUid.value,disabled:o.editable.value!==!0})),z=f(()=>"q-file q-field--auto-height"+(_.value===!0?" q-file--dnd":"")),a=f(()=>e.multiple===!0&&e.append===!0);function m(n){const d=u.value.slice();d.splice(n,1),i(d)}function x(n){const d=u.value.indexOf(n);d>-1&&m(d)}function i(n){h("update:modelValue",e.multiple===!0?n:n[0])}function c(n){n.keyCode===13&&ve(n)}function U(n){(n.keyCode===13||n.keyCode===32)&&s(n)}function L(){return F.value}function M(n,d){const b=w(n,d,u.value,a.value),B=L();B!=null&&(B.value=""),b!==void 0&&((e.multiple===!0?e.modelValue&&b.every(te=>u.value.includes(te)):e.modelValue===b[0])||i(a.value===!0?u.value.concat(b):b))}function A(){return[C("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function Z(){if(r.file!==void 0)return u.value.length===0?A():u.value.map((d,b)=>r.file({index:b,file:d,ref:this}));if(r.selected!==void 0)return u.value.length===0?A():r.selected({files:u.value,ref:this});if(e.useChips===!0)return u.value.length===0?A():u.value.map((d,b)=>C(ge,{key:"file-"+b,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{m(b)}},()=>C("span",{class:"ellipsis",textContent:d.name})));const n=e.displayValue!==void 0?e.displayValue:O.value;return n.length!==0?[C("div",{class:e.inputClass,style:e.inputStyle,textContent:n})]:A()}function ee(){const n={ref:F,...V.value,...E.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:M};return e.multiple===!0&&(n.multiple=!0),C("input",n)}return Object.assign(o,{fieldClass:z,emitValue:i,hasValue:j,inputRef:F,innerValue:u,floatingLabel:f(()=>j.value===!0||W(e.displayValue)),computedCounter:f(()=>{if(e.counterLabel!==void 0)return e.counterLabel(v.value);const n=e.maxFiles;return`${u.value.length}${n!==void 0?" / "+n:""} (${t.value})`}),getControlChild:()=>q("file"),getControl:()=>{const n={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(n,{onDragover:p,onDragleave:N,onKeydown:c,onKeyup:U}),C("div",n,[ee()].concat(Z()))}}),Object.assign(l,{removeAtIndex:m,removeFile:x,getNativeElement:()=>F.value}),fe(l,"nativeEl",()=>F.value),me(o)}}),$=e=>(xe("data-v-eae7b404"),e=e(),Se(),e),ke={class:"column justify-center items-center HomePage"},Ne={key:0,class:"column align-center items-center"},we=$(()=>S("div",{class:"heading-4"},"Drop it like it's hot",-1)),je={key:0,class:"fileContent"},Ae={class:"column align-center items-center"},Pe=$(()=>S("span",{class:"heading-4 q-my-md"},"Drop file here",-1)),Te=$(()=>S("div",{class:"text-uppercase text-muted row items-center"},[S("div",{class:"minus"}),S("span",null,"or select file manually"),S("div",{class:"minus"})],-1)),qe=pe({__name:"SelectFilePage",setup(e){const r=k(null),h=be(),y=he(),l=k(!1);function o(g){const s=new FileReader;s.onload=async()=>{console.log("loaded file"),await h.setStoreData(s.result),y.push("/file-scanned")},s.readAsText(g)}function F(g){var s;if((s=g.dataTransfer)!=null&&s.files){const p=g.dataTransfer.files[0];o(p)}}async function _(){await h.getData(),y.push({name:_e.dashboard_general})}return(g,s)=>(R(),Q("div",ke,[I(Ie,{class:"fileUpload",outlined:"",modelValue:r.value,"onUpdate:modelValue":[s[3]||(s[3]=p=>r.value=p),o]},{default:H(()=>[S("div",{class:ye(["dropArea fileContent",{isDragging:l.value}]),onDrop:P(F,["prevent"]),onDragenter:s[0]||(s[0]=P(p=>l.value=!0,["prevent"])),onDragleave:s[1]||(s[1]=P(p=>l.value=!1,["prevent"])),onDragover:s[2]||(s[2]=P(()=>{},["prevent"]))},[l.value?(R(),Q("div",Ne,[I(K,{size:"xl",name:"upload"}),we])):X("",!0)],34),l.value?X("",!0):(R(),Q("div",je,[S("div",Ae,[I(K,{size:"xl",name:"upload"}),Pe,Te,I(Y,{class:"q-mt-md",label:"Select file",icon:"upload",color:"primary"})])]))]),_:1},8,["modelValue"]),I(Y,{class:"q-mt-xl",onClick:_,outline:""},{default:H(()=>[Fe(" Use demo data ")]),_:1})]))}}),Oe=Ce(qe,[["__scopeId","data-v-eae7b404"]]);export{Oe as default};
//# sourceMappingURL=SelectFilePage-bjpDIHG3.js.map
