{"version":3,"file":"MessageWithWord-qsiWPD0F.js","sources":["../../src/components/MessageWithWord.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- <q-icon\r\n      v-if=\"showIcon\"\r\n      name=\"information\"\r\n      class=\"infoIcon\"\r\n    >\r\n  q-tooltip>Gekeken naar de woorden: {{ filterWords.join(', ') }}</q-tooltip>s\r\n    </q-icon> -->\r\n    <p\r\n      v-if=\"!filterWords.length\"\r\n      class=\"q-mt-md\"\r\n    >\r\n      No words selected\r\n    </p>\r\n\r\n    <highcharts :options=\"options\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { Author, Message } from '../utils/types.ts'\r\nimport type { PropType } from 'vue'\r\nimport { reactive, computed } from 'vue'\r\n\r\nconst props = defineProps({\r\n  data: {\r\n    type: Object as PropType<Author[]>,\r\n    required: true,\r\n  },\r\n\r\n  filterWords: {\r\n    type: Array as PropType<string[]>,\r\n    required: true,\r\n  },\r\n\r\n  // % of messages containing one of the words\r\n  showRelative: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  containsPerWord: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n\r\n  // showIcon: {\r\n  //   type: Boolean,\r\n  //   default: true,\r\n  // },\r\n})\r\n\r\nconst series = computed(() => {\r\n  return props.data?.map((participant) => {\r\n    const dataset = props.containsPerWord ? amountOfTimesPerWord(participant) : messagesContainsOneOfWord(participant)\r\n    const data = props.showRelative ? dataset.map((item) => parseFloat(((item / participant.messages.length) * 100).toFixed(2))) : dataset\r\n\r\n    return {\r\n      name: participant.name,\r\n      data,\r\n    }\r\n  })\r\n})\r\n\r\nfunction amountOfTimesPerWord(participant: Author) {\r\n  const amountOfTimesPerWord: number[] = []\r\n  props.filterWords.forEach((word) => {\r\n    amountOfTimesPerWord.push(participant.messages.filter((item) => item.message.includes(`${word.toLowerCase()}`)).length)\r\n  })\r\n  return amountOfTimesPerWord\r\n}\r\n\r\nfunction messagesContainsOneOfWord(participant: Author) {\r\n  const withWords: Message[] = []\r\n\r\n  props.filterWords.forEach((word) => {\r\n    // See if word is included in the message and make sure it's already picked up by another word\r\n    withWords.push(...participant.messages.filter((item) => item.message.includes(`${word.toLowerCase()}`) && withWords.findIndex((chosen) => chosen.id == item.id) == -1))\r\n  })\r\n\r\n  const data = [withWords.length]\r\n  return data\r\n}\r\n\r\nconst options = reactive({\r\n  title: null,\r\n  chart: {\r\n    type: 'column',\r\n    zooming: {\r\n      type: 'x',\r\n    },\r\n  },\r\n  series: computed(() => series.value),\r\n  xAxis: {\r\n    type: '',\r\n    categories: computed(() => (props.containsPerWord ? props.filterWords : props.showRelative ? ['Total in %'] : ['Total'])),\r\n  },\r\n  yAxis: {\r\n    title: {\r\n      text: '',\r\n    },\r\n  },\r\n\r\n  tooltip: {\r\n    shared: true,\r\n  },\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.infoIcon {\r\n  position: absolute;\r\n  top: 25px;\r\n  right: 0;\r\n}\r\n</style>\r\n"],"names":["props","__props","series","computed","_a","participant","dataset","amountOfTimesPerWord","messagesContainsOneOfWord","data","item","word","withWords","chosen","options","reactive"],"mappings":"4oBAyBA,MAAMA,EAAQC,EA4BRC,EAASC,EAAS,IAAM,OAC5B,OAAOC,EAAAJ,EAAM,OAAN,YAAAI,EAAY,IAAKC,GAAgB,CACtC,MAAMC,EAAUN,EAAM,gBAAkBO,EAAqBF,CAAW,EAAIG,EAA0BH,CAAW,EAC3GI,EAAOT,EAAM,aAAeM,EAAQ,IAAKI,GAAS,YAAaA,EAAOL,EAAY,SAAS,OAAU,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAIC,EAExH,MAAA,CACL,KAAMD,EAAY,KAClB,KAAAI,CAAA,CACF,EACD,CACF,EAED,SAASF,EAAqBF,EAAqB,CACjD,MAAME,EAAiC,CAAA,EACjC,OAAAP,EAAA,YAAY,QAASW,GAAS,CAClCJ,EAAqB,KAAKF,EAAY,SAAS,OAAQK,GAASA,EAAK,QAAQ,SAAS,GAAGC,EAAK,YAAA,CAAa,EAAE,CAAC,EAAE,MAAM,CAAA,CACvH,EACMJ,CACT,CAEA,SAASC,EAA0BH,EAAqB,CACtD,MAAMO,EAAuB,CAAA,EAEvB,OAAAZ,EAAA,YAAY,QAASW,GAAS,CAExBC,EAAA,KAAK,GAAGP,EAAY,SAAS,OAAQK,GAASA,EAAK,QAAQ,SAAS,GAAGC,EAAK,aAAa,EAAE,GAAKC,EAAU,UAAWC,GAAWA,EAAO,IAAMH,EAAK,EAAE,GAAK,EAAE,CAAC,CAAA,CACvK,EAEY,CAACE,EAAU,MAAM,CAEhC,CAEA,MAAME,EAAUC,EAAS,CACvB,MAAO,KACP,MAAO,CACL,KAAM,SACN,QAAS,CACP,KAAM,GACR,CACF,EACA,OAAQZ,EAAS,IAAMD,EAAO,KAAK,EACnC,MAAO,CACL,KAAM,GACN,WAAYC,EAAS,IAAOH,EAAM,gBAAkBA,EAAM,YAAcA,EAAM,aAAe,CAAC,YAAY,EAAI,CAAC,OAAO,CAAE,CAC1H,EACA,MAAO,CACL,MAAO,CACL,KAAM,EACR,CACF,EAEA,QAAS,CACP,OAAQ,EACV,CAAA,CACD"}