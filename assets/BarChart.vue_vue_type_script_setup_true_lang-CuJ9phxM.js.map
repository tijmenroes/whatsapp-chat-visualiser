{"version":3,"file":"BarChart.vue_vue_type_script_setup_true_lang-CuJ9phxM.js","sources":["../../src/utils/helperFunctions.ts","../../src/components/TimeSlide.vue","../../src/components/BarChart.vue"],"sourcesContent":["export function divideNumber(initial: number, divideAmount: number) {\n  return parseFloat(((initial / divideAmount) * 100).toFixed(2))\n}\n\n// https://gist.github.com/robmathers/1830ce09695f759bf2c4df15c29dd22d\n// essentially the same as Object.groupBy, but that's not widely supported yet.\nexport function groupBy(data: Record<any, any>[], key: string) {\n  // `data` is an array of objects, `key` is the key (or property accessor) to group by\n  // reduce runs this anonymous function on each element of `data` (the `item` parameter,\n  // returning the `storage` parameter at the end\n  return data.reduce(function (storage, item) {\n    // get the first instance of the key by which we're grouping\n    const group = item[key]\n\n    // set `storage` for this instance of group to the outer scope (if not empty) or initialize it\n    storage[group] = storage[group] || []\n\n    // add this item to its group within `storage`\n    storage[group].push(item)\n\n    // return the updated storage to the reduce function, which will then loop through the next\n    return storage\n  }, {}) // {} is the initial value of the storage\n}\n","<template>\r\n  <div class=\"container\">\r\n    <!-- {{ data }} -->\r\n    <highcharts :options=\"optionsMessagesOverTime\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { Author, Message } from '../utils/types.ts'\r\nimport type { PropType } from 'vue'\r\nimport { reactive, computed } from 'vue'\r\nimport { groupBy } from '../utils/helperFunctions.ts'\r\n\r\nconst props = defineProps({\r\n  data: {\r\n    type: Object as PropType<Author[]>,\r\n    required: true,\r\n  },\r\n\r\n  perAuthor: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n})\r\nconst series = computed(() => {\r\n  if (props.perAuthor) {\r\n    return props.data.map((participant) => {\r\n      const messages: Message[] = participant.messages\r\n\r\n      const dates = groupBy(messages, 'date')\r\n\r\n      const mappedDates = Object.entries(dates).map((item: [string, Message[]]) => {\r\n        const start = new Date(item[0]).setUTCHours(0, 0, 0, 0)\r\n        // if (new Date(start).getTime() == 'NaN' || !new Date(start).getTime()) {\r\n        //   console.log('NaN', item)\r\n        // }\r\n        return [new Date(start).getTime(), item[1].length]\r\n      })\r\n      return {\r\n        name: participant.name,\r\n        data: mappedDates,\r\n      }\r\n    })\r\n  }\r\n  const messages: Message[] = props.data.flatMap((author) => author.messages).sort((a, b) => a.id - b.id)\r\n  const dates = groupBy(messages, 'date')\r\n  const mappedDates = Object.entries(dates).map((item: [string, Message[]]) => {\r\n    const start = new Date(item[0]).setUTCHours(0, 0, 0, 0)\r\n    return [new Date(start).getTime(), item[1].length]\r\n  })\r\n  return [\r\n    {\r\n      name: 'Total messages',\r\n      data: mappedDates,\r\n    },\r\n  ]\r\n})\r\n\r\nconst optionsMessagesOverTime = reactive({\r\n  title: null,\r\n  chart: {\r\n    // type: '',\r\n    zooming: {\r\n      type: 'x',\r\n    },\r\n  },\r\n  series: computed(() => series.value),\r\n  xAxis: {\r\n    type: 'datetime',\r\n\r\n    title: {\r\n      text: 'Date',\r\n    },\r\n  },\r\n  yAxis: {\r\n    title: {\r\n      text: '',\r\n    },\r\n  },\r\n\r\n  tooltip: {\r\n    shared: true,\r\n  },\r\n})\r\n</script>\r\n","<template>\n  <div class=\"container\">\n    <highcharts :options=\"options\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { PropType } from 'vue'\nimport { reactive, computed } from 'vue'\n\nconst props = defineProps({\n  series: {\n    type: Object as PropType<{ name: string; data: number[] }[]>,\n    required: true,\n  },\n\n  categories: {\n    type: Array as PropType<string[] | number[]>,\n    default: () => [],\n  },\n})\n\nconst options = reactive({\n  title: null,\n  chart: {\n    type: 'column',\n    zoomType: 'x',\n    zooming: {\n      type: 'x',\n    },\n  },\n  series: computed(() => props.series),\n  xAxis: {\n    type: '',\n    categories: props.categories,\n\n    title: {\n      text: '',\n    },\n  },\n  yAxis: {\n    title: {\n      text: '',\n    },\n  },\n\n  tooltip: {\n    shared: true,\n  },\n})\n</script>\n"],"names":["divideNumber","initial","divideAmount","groupBy","data","key","storage","item","group","props","__props","series","computed","participant","messages","dates","mappedDates","start","author","a","b","optionsMessagesOverTime","reactive","options"],"mappings":"yYAAgB,SAAAA,EAAaC,EAAiBC,EAAsB,CAClE,OAAO,YAAaD,EAAUC,EAAgB,KAAK,QAAQ,CAAC,CAAC,CAC/D,CAIgB,SAAAC,EAAQC,EAA0BC,EAAa,CAI7D,OAAOD,EAAK,OAAO,SAAUE,EAASC,EAAM,CAEpC,MAAAC,EAAQD,EAAKF,CAAG,EAGtB,OAAAC,EAAQE,CAAK,EAAIF,EAAQE,CAAK,GAAK,CAAA,EAG3BF,EAAAE,CAAK,EAAE,KAAKD,CAAI,EAGjBD,CACT,EAAG,CAAE,CAAA,CACP,yICVA,MAAMG,EAAQC,EAWRC,EAASC,EAAS,IAAM,CAC5B,GAAIH,EAAM,UACR,OAAOA,EAAM,KAAK,IAAKI,GAAgB,CACrC,MAAMC,EAAsBD,EAAY,SAElCE,EAAQZ,EAAQW,EAAU,MAAM,EAEhCE,EAAc,OAAO,QAAQD,CAAK,EAAE,IAAKR,GAA8B,CACrE,MAAAU,EAAQ,IAAI,KAAKV,EAAK,CAAC,CAAC,EAAE,YAAY,EAAG,EAAG,EAAG,CAAC,EAI/C,MAAA,CAAC,IAAI,KAAKU,CAAK,EAAE,QAAW,EAAAV,EAAK,CAAC,EAAE,MAAM,CAAA,CAClD,EACM,MAAA,CACL,KAAMM,EAAY,KAClB,KAAMG,CAAA,CACR,CACD,EAEH,MAAMF,EAAsBL,EAAM,KAAK,QAASS,GAAWA,EAAO,QAAQ,EAAE,KAAK,CAACC,EAAGC,IAAMD,EAAE,GAAKC,EAAE,EAAE,EAChGL,EAAQZ,EAAQW,EAAU,MAAM,EAK/B,MAAA,CACL,CACE,KAAM,iBACN,KAPgB,OAAO,QAAQC,CAAK,EAAE,IAAKR,GAA8B,CACrE,MAAAU,EAAQ,IAAI,KAAKV,EAAK,CAAC,CAAC,EAAE,YAAY,EAAG,EAAG,EAAG,CAAC,EAC/C,MAAA,CAAC,IAAI,KAAKU,CAAK,EAAE,QAAW,EAAAV,EAAK,CAAC,EAAE,MAAM,CAAA,CAClD,CAKC,CAAA,CACF,CACD,EAEKc,EAA0BC,EAAS,CACvC,MAAO,KACP,MAAO,CAEL,QAAS,CACP,KAAM,GACR,CACF,EACA,OAAQV,EAAS,IAAMD,EAAO,KAAK,EACnC,MAAO,CACL,KAAM,WAEN,MAAO,CACL,KAAM,MACR,CACF,EACA,MAAO,CACL,MAAO,CACL,KAAM,EACR,CACF,EAEA,QAAS,CACP,OAAQ,EACV,CAAA,CACD,8OCzED,MAAMF,EAAQC,EAYRa,EAAUD,EAAS,CACvB,MAAO,KACP,MAAO,CACL,KAAM,SACN,SAAU,IACV,QAAS,CACP,KAAM,GACR,CACF,EACA,OAAQV,EAAS,IAAMH,EAAM,MAAM,EACnC,MAAO,CACL,KAAM,GACN,WAAYA,EAAM,WAElB,MAAO,CACL,KAAM,EACR,CACF,EACA,MAAO,CACL,MAAO,CACL,KAAM,EACR,CACF,EAEA,QAAS,CACP,OAAQ,EACV,CAAA,CACD"}