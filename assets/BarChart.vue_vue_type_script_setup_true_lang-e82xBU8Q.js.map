{"version":3,"file":"BarChart.vue_vue_type_script_setup_true_lang-e82xBU8Q.js","sources":["../../src/components/TimeSlide.vue","../../src/components/BarChart.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <highcharts\r\n      :options=\"optionsMessagesOverTime\"\r\n      :callback=\"chartLoad\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { Author, Message } from '../utils/types.ts'\r\nimport type { PropType } from 'vue'\r\nimport { reactive, computed } from 'vue'\r\nimport { groupBy } from '../utils/helperFunctions.ts'\r\nimport { useStore } from '@/store/index.ts'\r\n\r\nconst props = defineProps({\r\n  data: {\r\n    type: Object as PropType<Author[]>,\r\n    required: true,\r\n  },\r\n\r\n  perAuthor: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n})\r\n\r\nconst store = useStore()\r\nconst series = computed(() => {\r\n  if (props.perAuthor) {\r\n    return props.data.map((participant) => {\r\n      const messages: Message[] = participant.messages\r\n\r\n      const dates = groupBy(messages, 'date')\r\n\r\n      const mappedDates = Object.entries(dates).map((item: [string, Message[]]) => {\r\n        const start = new Date(item[0]).setUTCHours(0, 0, 0, 0)\r\n        return [new Date(start).getTime(), item[1].length]\r\n      })\r\n      return {\r\n        name: participant.name,\r\n        data: mappedDates,\r\n        color: store.getColorByAuthorId(participant.authorIndex),\r\n      }\r\n    })\r\n  }\r\n  const messages: Message[] = props.data.flatMap((author) => author.messages).sort((a, b) => a.id - b.id)\r\n  const dates = groupBy(messages, 'date')\r\n  const mappedDates = Object.entries(dates).map((item: [string, Message[]]) => {\r\n    const start = new Date(item[0]).setUTCHours(0, 0, 0, 0)\r\n    return [new Date(start).getTime(), item[1].length]\r\n  })\r\n  return [\r\n    {\r\n      name: 'Total messages',\r\n      data: mappedDates,\r\n    },\r\n  ]\r\n})\r\n\r\nfunction chartLoad() {\r\n  console.log('Chart loaded')\r\n}\r\n\r\nconst optionsMessagesOverTime = reactive({\r\n  title: null,\r\n  chart: {\r\n    // type: '',\r\n    zooming: {\r\n      type: 'x',\r\n    },\r\n  },\r\n  series: computed(() => series.value),\r\n  xAxis: {\r\n    type: 'datetime',\r\n\r\n    title: {\r\n      text: 'Date',\r\n    },\r\n  },\r\n\r\n  yAxis: {\r\n    title: {\r\n      text: '',\r\n    },\r\n  },\r\n\r\n  tooltip: {\r\n    shared: true,\r\n  },\r\n})\r\n</script>\r\n","<template>\r\n  <div class=\"container\">\r\n    <highcharts :options=\"options\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport type { PropType } from 'vue'\r\nimport { reactive, computed } from 'vue'\r\n\r\nconst props = defineProps({\r\n  series: {\r\n    type: Object as PropType<{ name: string; data: number[] }[]>,\r\n    required: true,\r\n  },\r\n\r\n  categories: {\r\n    type: Array as PropType<string[] | number[]>,\r\n    default: () => [],\r\n  },\r\n})\r\n\r\nconst options = reactive({\r\n  title: null,\r\n  chart: {\r\n    type: 'column',\r\n    zoomType: 'x',\r\n    zooming: {\r\n      type: 'x',\r\n    },\r\n  },\r\n  series: computed(() => props.series),\r\n  xAxis: {\r\n    type: '',\r\n    categories: props.categories,\r\n\r\n    title: {\r\n      text: '',\r\n    },\r\n  },\r\n  yAxis: {\r\n    title: {\r\n      text: '',\r\n    },\r\n  },\r\n\r\n  tooltip: {\r\n    shared: true,\r\n  },\r\n})\r\n</script>\r\n"],"names":["props","__props","store","useStore","series","computed","participant","messages","dates","groupBy","mappedDates","item","start","author","a","b","chartLoad","optionsMessagesOverTime","reactive","options"],"mappings":"+hBAgBA,MAAMA,EAAQC,EAYRC,EAAQC,IACRC,EAASC,EAAS,IAAM,CAC5B,GAAIL,EAAM,UACR,OAAOA,EAAM,KAAK,IAAKM,GAAgB,CACrC,MAAMC,EAAsBD,EAAY,SAElCE,EAAQC,EAAQF,EAAU,MAAM,EAEhCG,EAAc,OAAO,QAAQF,CAAK,EAAE,IAAKG,GAA8B,CACrE,MAAAC,EAAQ,IAAI,KAAKD,EAAK,CAAC,CAAC,EAAE,YAAY,EAAG,EAAG,EAAG,CAAC,EAC/C,MAAA,CAAC,IAAI,KAAKC,CAAK,EAAE,QAAW,EAAAD,EAAK,CAAC,EAAE,MAAM,CAAA,CAClD,EACM,MAAA,CACL,KAAML,EAAY,KAClB,KAAMI,EACN,MAAOR,EAAM,mBAAmBI,EAAY,WAAW,CAAA,CACzD,CACD,EAEH,MAAMC,EAAsBP,EAAM,KAAK,QAASa,GAAWA,EAAO,QAAQ,EAAE,KAAK,CAACC,EAAGC,IAAMD,EAAE,GAAKC,EAAE,EAAE,EAChGP,EAAQC,EAAQF,EAAU,MAAM,EAK/B,MAAA,CACL,CACE,KAAM,iBACN,KAPgB,OAAO,QAAQC,CAAK,EAAE,IAAKG,GAA8B,CACrE,MAAAC,EAAQ,IAAI,KAAKD,EAAK,CAAC,CAAC,EAAE,YAAY,EAAG,EAAG,EAAG,CAAC,EAC/C,MAAA,CAAC,IAAI,KAAKC,CAAK,EAAE,QAAW,EAAAD,EAAK,CAAC,EAAE,MAAM,CAAA,CAClD,CAKC,CAAA,CACF,CACD,EAED,SAASK,GAAY,CACnB,QAAQ,IAAI,cAAc,CAC5B,CAEA,MAAMC,EAA0BC,EAAS,CACvC,MAAO,KACP,MAAO,CAEL,QAAS,CACP,KAAM,GACR,CACF,EACA,OAAQb,EAAS,IAAMD,EAAO,KAAK,EACnC,MAAO,CACL,KAAM,WAEN,MAAO,CACL,KAAM,MACR,CACF,EAEA,MAAO,CACL,MAAO,CACL,KAAM,EACR,CACF,EAEA,QAAS,CACP,OAAQ,EACV,CAAA,CACD,yPCjFD,MAAMJ,EAAQC,EAYRkB,EAAUD,EAAS,CACvB,MAAO,KACP,MAAO,CACL,KAAM,SACN,SAAU,IACV,QAAS,CACP,KAAM,GACR,CACF,EACA,OAAQb,EAAS,IAAML,EAAM,MAAM,EACnC,MAAO,CACL,KAAM,GACN,WAAYA,EAAM,WAElB,MAAO,CACL,KAAM,EACR,CACF,EACA,MAAO,CACL,MAAO,CACL,KAAM,EACR,CACF,EAEA,QAAS,CACP,OAAQ,EACV,CAAA,CACD"}