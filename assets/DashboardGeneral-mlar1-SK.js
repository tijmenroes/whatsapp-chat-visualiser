import{q as S,t as x,r as A,c as s,L as k,w as h,x as E,y as a,z as o,M as F,N as G,A as N,O as B,P,R as W,S as I,T,U as D,V as O,C as V,W as U}from"./index-wZzl7htL.js";import{D as n}from"./DashboardCard-HrFfNLWQ.js";const q={class:"row dashboardView"},z={class:"row"},R=S({__name:"DashboardGeneral",setup(H){const l=x(),v=A(["the"]),w=s(()=>l.authorsDataMessages),g=s(()=>l.messagesPerAuthor),_=s(()=>l.messagesContainingEmoji),b=s(()=>l.messagesContainginAttachments),y=s(()=>l.eventsData),f=s(()=>l.totalDays),C=s(()=>l.isGroupChat),$=s(()=>j());console.log($),k(l.filterDate,()=>{j()},{immediate:!0});function j(){const r=s(()=>g.value.map(e=>e.messages.length).reduce((e,u)=>e+u,0)),c=s(()=>g.value.map(e=>({name:e.name,messages:e.messages.length})).sort((e,u)=>u.messages-e.messages)),m=s(()=>{var d;const e=(d=_.value.flatMap(t=>t.messages).flatMap(t=>t.emojis))==null?void 0:d.reduce(function(t,i){return t[i||""]?++t[i||""]:t[i||""]=1,t},{});return Object.entries(e||{}).sort((t,i)=>i[1]-t[1]).splice(0,4).map(([t,i])=>({emoji:t,count:i}))}),p=s(()=>c.value.map(e=>({name:e.name,messages:e.messages/f.value}))),M=s(()=>{var e,u,d;return[{title:"Total messages sent",value:r.value,icon:"message",subtitle:`Daily average ${(r.value/f.value).toFixed(2)} messages`,class:"",showValue:!!r.value},{title:"Most messages sent",value:p.value[0].name,subtitle:`Daily average ${p.value[0].messages.toFixed(2)} messages`,icon:"keyboard",class:"",showValue:!!p.value[0].messages},{title:"Most used emoji",value:((e=m.value[0])==null?void 0:e.emoji)||"No emoji used",subtitle:`Daily average ${(((u=m.value[0])==null?void 0:u.count)/f.value).toFixed(2)} times used`,icon:"mood",class:"isEmoji",showValue:!!((d=m.value[0])!=null&&d.count)}]});return l.setSummaryItems(M.value),{summaryItems:M}}return(r,c)=>(h(),E("div",q,[a(n,{title:"Messages per day"},{default:o(()=>[a(F,{data:g.value},null,8,["data"])]),_:1}),a(n,{title:"Filter how many times words are used",subtitle:"Fill in words to see how often they are used"},{default:o(()=>[a(G,{filled:"",modelValue:v.value,"onUpdate:modelValue":c[0]||(c[0]=m=>v.value=m),multiple:"","use-chips":"","hide-dropdown-icon":"","use-input":"","new-value-mode":"add",label:"Multiple selection"},null,8,["modelValue"]),N("div",z,[a(B,{class:"col-12",data:w.value,"filter-words":v.value},null,8,["data","filter-words"])])]),_:1}),a(n,{"is-small":"",title:"Emoji's used total"},{default:o(()=>[a(P,{data:_.value},null,8,["data"])]),_:1}),a(n,{"is-small":"",title:"Emoji's used per person"},{default:o(()=>[a(W,{data:_.value,class:"col-6"},null,8,["data"])]),_:1}),a(n,{"is-small":"",title:"Attachments sent"},{default:o(()=>[a(I,{data:b.value},null,8,["data"])]),_:1}),a(n,{"is-small":"",title:"Message length total"},{default:o(()=>[a(T,{data:w.value},null,8,["data"])]),_:1}),C.value?(h(),D(n,{key:0,"is-small":"",title:"Group events"},{default:o(()=>[a(O,{data:y.value},null,8,["data"])]),_:1})):V("",!0),C.value?(h(),D(n,{key:1,"is-small":"",title:"Group name changes"},{default:o(()=>[a(U,{data:y.value},null,8,["data"])]),_:1})):V("",!0)]))}});export{R as default};
