import{d as k,u as S,r as x,c as s,w as A,o as p,a as E,b as a,e as o,_ as F,Q as G,f as B,M as N,g as I,h as P,i as W,j as Q,k as b,l as T,m as D,n as H}from"./index-4l0yY-Qj.js";import{D as n}from"./DashboardCard-V9oMC1pi.js";const O={class:"row dashboardView"},U={class:"row"},K=k({__name:"DashboardGeneral",setup(q){const l=S(),v=x(["the"]),w=s(()=>l.authorsDataMessages),g=s(()=>l.messagesPerAuthor),_=s(()=>l.messagesContainingEmoji),V=s(()=>l.messagesContainginAttachments),y=s(()=>l.eventsData),f=s(()=>l.totalDays),j=s(()=>l.isGroupChat),$=s(()=>C());console.log($),A(l.filterDate,()=>{C()},{immediate:!0});function C(){const r=s(()=>g.value.map(e=>e.messages.length).reduce((e,u)=>e+u,0)),c=s(()=>g.value.map(e=>({name:e.name,messages:e.messages.length})).sort((e,u)=>u.messages-e.messages)),m=s(()=>{var d;const e=(d=_.value.flatMap(t=>t.messages).flatMap(t=>t.emojis))==null?void 0:d.reduce(function(t,i){return t[i||""]?++t[i||""]:t[i||""]=1,t},{});return Object.entries(e||{}).sort((t,i)=>i[1]-t[1]).splice(0,4).map(([t,i])=>({emoji:t,count:i}))}),h=s(()=>c.value.map(e=>({name:e.name,messages:e.messages/f.value}))),M=s(()=>{var e,u,d;return[{title:"Total messages sent",value:r.value,icon:"message",subtitle:`Daily average ${(r.value/f.value).toFixed(2)} messages`,class:"",showValue:!!r.value},{title:"Most messages sent",value:h.value[0].name,subtitle:`Daily average ${h.value[0].messages.toFixed(2)} messages`,icon:"keyboard",class:"",showValue:!!h.value[0].messages},{title:"Most used emoji",value:((e=m.value[0])==null?void 0:e.emoji)||"No emoji used",subtitle:`Daily average ${(((u=m.value[0])==null?void 0:u.count)/f.value).toFixed(2)} times used`,icon:"mood",class:"isEmoji",showValue:!!((d=m.value[0])!=null&&d.count)}]});return l.setSummaryItems(M.value),{summaryItems:M}}return(r,c)=>(p(),E("div",O,[a(n,{title:"Messages per day"},{default:o(()=>[a(F,{data:g.value},null,8,["data"])]),_:1}),a(n,{title:"Filter how many times words are used",subtitle:"Fill in words to see how often they are used"},{default:o(()=>[a(G,{filled:"",modelValue:v.value,"onUpdate:modelValue":c[0]||(c[0]=m=>v.value=m),multiple:"","use-chips":"","hide-dropdown-icon":"","use-input":"","new-value-mode":"add",label:"Multiple selection"},null,8,["modelValue"]),B("div",U,[a(N,{class:"col-12",data:w.value,"filter-words":v.value},null,8,["data","filter-words"])])]),_:1}),a(n,{"is-small":"",title:"Emoji's used total"},{default:o(()=>[a(I,{data:_.value},null,8,["data"])]),_:1}),a(n,{"is-small":"",title:"Emoji's used per person"},{default:o(()=>[a(P,{data:_.value,class:"col-6"},null,8,["data"])]),_:1}),a(n,{"is-small":"",title:"Attachments sent"},{default:o(()=>[a(W,{data:V.value},null,8,["data"])]),_:1}),a(n,{"is-small":"",title:"Message length total"},{default:o(()=>[a(Q,{data:w.value},null,8,["data"])]),_:1}),j.value?(p(),b(n,{key:0,"is-small":"",title:"Group events"},{default:o(()=>[a(T,{data:y.value},null,8,["data"])]),_:1})):D("",!0),j.value?(p(),b(n,{key:1,"is-small":"",title:"Group name changes"},{default:o(()=>[a(H,{data:y.value},null,8,["data"])]),_:1})):D("",!0)]))}});export{K as default};
