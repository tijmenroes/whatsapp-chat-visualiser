import{g as G,r as N,c as f,s as ae,a as J,b as le,h as C,d as ne,u as ie,e as se,f as ue,i as oe,j as re,k as ce,l as M,m as de,n as fe,o as me,p as ve,Q as ge,q as pe,t as he,v as Fe,w as R,x as Q,y as k,z as W,A as _,B as H,C as X,D as ye,E as T,F as Y,G as be,H as xe,I as _e,J as Se,K as Ce,_ as De}from"./index-wZzl7htL.js";function D(e,c,S,F){const n=[];return e.forEach(o=>{F(o)===!0?n.push(o):c.push({failedPropValidation:S,file:o})}),n}function q(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),J(e)}const Ve={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ze=["rejected"];function ke({editable:e,dnd:c,getFileInput:S,addFilesToQueue:F}){const{props:n,emit:o,proxy:y}=G(),b=N(null),g=f(()=>n.accept!==void 0?n.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),s=f(()=>parseInt(n.maxFiles,10)),p=f(()=>parseInt(n.maxTotalSize,10));function A(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&ae(t);else{const v=S();v&&v!==t.target&&v.click(t)}}function I(t){e.value&&t&&F(null,t)}function w(t,v,V,z){let l=Array.from(v||t.target.files);const m=[],x=()=>{m.length!==0&&o("rejected",m)};if(n.accept!==void 0&&g.value.indexOf("*/")===-1&&(l=D(l,m,"accept",i=>g.value.some(r=>i.type.toUpperCase().startsWith(r)||i.name.toUpperCase().endsWith(r))),l.length===0))return x();if(n.maxFileSize!==void 0){const i=parseInt(n.maxFileSize,10);if(l=D(l,m,"max-file-size",r=>r.size<=i),l.length===0)return x()}if(n.multiple!==!0&&l.length!==0&&(l=[l[0]]),l.forEach(i=>{i.__key=i.webkitRelativePath+i.lastModified+i.name+i.size}),z===!0){const i=V.map(r=>r.__key);l=D(l,m,"duplicate",r=>i.includes(r.__key)===!1)}if(l.length===0)return x();if(n.maxTotalSize!==void 0){let i=z===!0?V.reduce((r,U)=>r+U.size,0):0;if(l=D(l,m,"max-total-size",r=>(i+=r.size,i<=p.value)),l.length===0)return x()}if(typeof n.filter=="function"){const i=n.filter(l);l=D(l,m,"filter",r=>i.includes(r))}if(n.maxFiles!==void 0){let i=z===!0?V.length:0;if(l=D(l,m,"max-files",()=>(i++,i<=s.value)),l.length===0)return x()}if(x(),l.length!==0)return l}function O(t){q(t),c.value!==!0&&(c.value=!0)}function u(t){J(t),(t.relatedTarget!==null||le.is.safari!==!0?t.relatedTarget!==b.value:document.elementsFromPoint(t.clientX,t.clientY).includes(b.value)===!1)===!0&&(c.value=!1)}function j(t){q(t);const v=t.dataTransfer.files;v.length!==0&&F(null,v),c.value=!1}function E(t){if(c.value===!0)return C("div",{ref:b,class:`q-${t}__dnd absolute-full`,onDragenter:q,onDragover:q,onDragleave:u,onDrop:j})}return Object.assign(y,{pickFiles:A,addFiles:I}),{pickFiles:A,addFiles:I,onDragover:O,onDragleave:u,processFiles:w,getDndNode:E,maxFilesNumber:s,maxTotalSizeNumber:p}}const Ne=ne({name:"QFile",inheritAttrs:!1,props:{...ie,...se,...Ve,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ue,...ze],setup(e,{slots:c,emit:S,attrs:F}){const{proxy:n}=G(),o=oe(),y=N(null),b=N(!1),g=re(e),{pickFiles:s,onDragover:p,onDragleave:A,processFiles:I,getDndNode:w}=ke({editable:o.editable,dnd:b,getFileInput:K,addFilesToQueue:L}),O=ce(e),u=f(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),j=f(()=>M(u.value)),E=f(()=>u.value.map(a=>a.name).join(", ")),t=f(()=>de(u.value.reduce((a,d)=>a+d.size,0))),v=f(()=>({totalSize:t.value,filesNumber:u.value.length,maxFiles:e.maxFiles})),V=f(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:g.value,...F,id:o.targetUid.value,disabled:o.editable.value!==!0})),z=f(()=>"q-file q-field--auto-height"+(b.value===!0?" q-file--dnd":"")),l=f(()=>e.multiple===!0&&e.append===!0);function m(a){const d=u.value.slice();d.splice(a,1),i(d)}function x(a){const d=u.value.indexOf(a);d>-1&&m(d)}function i(a){S("update:modelValue",e.multiple===!0?a:a[0])}function r(a){a.keyCode===13&&ve(a)}function U(a){(a.keyCode===13||a.keyCode===32)&&s(a)}function K(){return y.value}function L(a,d){const h=I(a,d,u.value,l.value),B=K();B!=null&&(B.value=""),h!==void 0&&((e.multiple===!0?e.modelValue&&h.every(te=>u.value.includes(te)):e.modelValue===h[0])||i(l.value===!0?u.value.concat(h):h))}function P(){return[C("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function Z(){if(c.file!==void 0)return u.value.length===0?P():u.value.map((d,h)=>c.file({index:h,file:d,ref:this}));if(c.selected!==void 0)return u.value.length===0?P():c.selected({files:u.value,ref:this});if(e.useChips===!0)return u.value.length===0?P():u.value.map((d,h)=>C(ge,{key:"file-"+h,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{m(h)}},()=>C("span",{class:"ellipsis",textContent:d.name})));const a=e.displayValue!==void 0?e.displayValue:E.value;return a.length!==0?[C("div",{class:e.inputClass,style:e.inputStyle,textContent:a})]:P()}function ee(){const a={ref:y,...V.value,...O.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:L};return e.multiple===!0&&(a.multiple=!0),C("input",a)}return Object.assign(o,{fieldClass:z,emitValue:i,hasValue:j,inputRef:y,innerValue:u,floatingLabel:f(()=>j.value===!0||M(e.displayValue)),computedCounter:f(()=>{if(e.counterLabel!==void 0)return e.counterLabel(v.value);const a=e.maxFiles;return`${u.value.length}${a!==void 0?" / "+a:""} (${t.value})`}),getControlChild:()=>w("file"),getControl:()=>{const a={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(a,{onDragover:p,onDragleave:A,onKeydown:r,onKeyup:U}),C("div",a,[ee()].concat(Z()))}}),Object.assign(n,{removeAtIndex:m,removeFile:x,getNativeElement:()=>y.value}),fe(n,"nativeEl",()=>y.value),me(o)}}),$=e=>(Se("data-v-d93adb1f"),e=e(),Ce(),e),Ae={class:"column justify-center items-center HomePage"},Ie={key:0,class:"column align-center items-center"},je=$(()=>_("div",{class:"heading-4"},"Drop it like it's hot",-1)),Pe={key:0,class:"fileContent"},Te={class:"column align-center items-center"},qe=$(()=>_("span",{class:"heading-4 q-my-md"},"Drop file here",-1)),we=$(()=>_("div",{class:"text-uppercase text-muted row items-center"},[_("div",{class:"minus"}),_("span",null,"or select file manually"),_("div",{class:"minus"})],-1)),Oe=pe({__name:"SelectFilePage",setup(e){const c=N(null),S=he(),F=Fe(),n=N(!1);function o(g){const s=new FileReader;s.onload=async()=>{console.log("loaded file"),await S.setStoreData(s.result),F.push("/file-scanned")},s.readAsText(g)}function y(g){var s;if((s=g.dataTransfer)!=null&&s.files){const p=g.dataTransfer.files[0];o(p)}}async function b(){await xe(),F.push({name:_e.dashboard_general})}return(g,s)=>(R(),Q("div",Ae,[k(Ne,{class:"fileUpload",outlined:"",modelValue:c.value,"onUpdate:modelValue":[s[3]||(s[3]=p=>c.value=p),o]},{default:W(()=>[_("div",{class:ye(["dropArea fileContent",{isDragging:n.value}]),onDrop:T(y,["prevent"]),onDragenter:s[0]||(s[0]=T(p=>n.value=!0,["prevent"])),onDragleave:s[1]||(s[1]=T(p=>n.value=!1,["prevent"])),onDragover:s[2]||(s[2]=T(()=>{},["prevent"]))},[n.value?(R(),Q("div",Ie,[k(H,{size:"xl",name:"upload"}),je])):X("",!0)],34),n.value?X("",!0):(R(),Q("div",Pe,[_("div",Te,[k(H,{size:"xl",name:"upload"}),qe,we,k(Y,{class:"q-mt-md",label:"Select file",icon:"upload",color:"primary"})])]))]),_:1},8,["modelValue"]),k(Y,{class:"q-mt-xl",onClick:b,outline:""},{default:W(()=>[be(" Use demo data ")]),_:1})]))}}),Ue=De(Oe,[["__scopeId","data-v-d93adb1f"]]);export{Ue as default};
